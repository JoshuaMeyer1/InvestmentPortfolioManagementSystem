<!DOCTYPE html>
<html lang = "en">

<head>

    <title>Portfolio Screen</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- fonts -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/fontawesome.min.css"
        integrity="undefined" crossorigin="anonymous" />

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script src="mainScript.js"></script>

    <script>

        var currMetric = ""
        var currTimePeriod = "";

        var tablesDict = [];

        function updateTable() {
            var listTable = document.getElementById("stockTable");
            listTable.innerHTML = '';
            for (var i = 0; i < tablesDict.length; i++) {
                listTable.innerHTML += '<tr><th scope="row">' + String(i) + '</th><td>' + String(tablesDict[i]["stockName"]) + '</td><td>' + String(tablesDict[i]["stockExchange"]) + '</td><td>' + String(tablesDict[i]["buyDate"]) + '</td></tr>';
            }
        }

        function removeStock(index) {
            tablesDict.splice(index, 1);
            updateTable();
        }


        function submitStock() {
            var stockName = document.getElementById("stockName").value;
            var stockExchange = document.getElementById("stockExchange").value;
            var buyDate = document.getElementById("buyDate").value;

            tablesDict.push({
                'stockName': stockName,
                'stockExchange': stockExchange,
                'buyDate': buyDate
            });


            console.log(tablesDict);
            updateTable();
        }

        function listTable() {
            tablesDict = JSON.parse(localStorage.getItem("stockTable"));
            updateTable();
        }

        function metricSelection(metric) {
            currMetric = metric;
            document.getElementById('metricSelection').innerHTML = currMetric;
        }

        function intervalSelection(interval) {
            currTimePeriod = interval;
            document.getElementById('timeSelection').innerHTML = currTimePeriod;
        }

        function calculateMetric() {
            if (currMetric === "Dividends") {
                alert("The dividends of your portfolio in the last " + currTimePeriod + " is " + "XYZ")
            }
            else if (currMetric === "Standard Deviation") {
                alert("The dividends of your portfolio in the last " + currTimePeriod + " is " + "XYZ")
            }
            else if (currMetric === "Sortino Ratio") {
                alert("The dividends of your portfolio in the last " + currTimePeriod + " is " + "XYZ")
            }
        }

    </script>
</head>

<body onload="listTable()">
    <div class="navigation">
        <ul>
            <li>
                <a href="#" style="padding-left: 0">
                    <svg height="200" width="200">
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:black;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#288494;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="100" cy="100" r="100" fill="white" />
                        <circle cx="100" cy="100" r="93" fill="url(#grad1)" />
                        <text fill="white" font-size="78" style="font-family:verdana,serif" x="3" y="131">IPMS</text>
                        Sorry, your browser does not support inline SVG.
                    </svg>
                </a>
            </li>
            <li>
                <a href="userProfile.html" style="color: #a8a8a8">
                    <span class="linkText">User Profile</span>
                </a>
            </li>

            <li>
                <a href="portfolio.html" style="color: #a8a8a8">
                    <span class="linkText">Portfolio</span>
                </a>
            </li>

            <li>
                <a href="#">
                    <span class="linkText">Portfolio Analysis</span>
                </a>
            </li>

            
        </ul>
    </div>

    <div class="header">
        <h2 style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, garamond,serif;">
            Data Selection
        </h2>
    </div>

    <div class="contentContainer">
        <div id="dataSelectionContent">
            <div id="parameterSelection" class="input-group input-group-lg">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-lg">Table</span>
                </div>
                <div class="input-group-append">
                    <button id="metricSelection" class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Metric</button>
                    <div class="dropdown-menu" id="tableSelectionDiv">

                        <a class="dropdown-item" href="#" onclick="metricSelection('Dividends')">Dividends</a>
                        <a class="dropdown-item" href="#" onclick="metricSelection('Standard Deviation')">Standard Deviation</a>
                        <a class="dropdown-item" href="#" onclick="metricSelection('Sortino Ratio')">Sortino Ratio</a>

                    </div>
                </div>
                <!-- <input type="text" class="form-control" placeholder="Field1, Field2, Field3..."> -->
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-lg">Duration</span>
                </div>
                <div class="input-group-append">
                    <button id="timeSelection" class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Time Period</button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#" onclick="intervalSelection('3 months')">3 Months</a>
                        <a class="dropdown-item" href="#" onclick="intervalSelection('6 months')">6 Months</a>
                        <a class="dropdown-item" href="#" onclick="intervalSelection('1 year')">1 Year</a>
                    </div>
                </div>
                <button onclick="calculateMetric()" style="border-radius: 0;" class="btn btn-outline-secondary" type="button">Calculate Metric</button>
            </div>
        </div>
    </div>

    <div class="contentContainer">
        <div id="stockPortfolio">
            <table class="table">
                <thead class="thead-light">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Stock</th>
                        <th scope="col">Stock Exchange</th>
                        <th scope="col">Buy Date</th>
                    </tr>
                </thead>
                <tbody id = "stockTable">

                    <!--
                    <tr>
                        <th scope="row">1</th>
                        <td>Mark</td>
                        <td>Otto</td>
                        <td>@mdo</td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>Jacob</td>
                        <td>Thornton</td>
                        <td>@fat</td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>Larry</td>
                        <td>the Bird</td>
                        <td>@twitter</td>
                    </tr>
                    -->

                </tbody>
            </table>
        </div>
    </div>
</body>

</html>
