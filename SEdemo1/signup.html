<!DOCTYPE html>
<html lang = "en">

  <head>
    <link rel="stylesheet" href="login.css">


  <!-- boostrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script src="mainScript.js"></script>
    <title>signup page</title>

  </head>

  <body>
    <div class="container">
      <div class="containerItem">

        <div class="text-center">
          <h2 style="color:rgb(255, 255, 255)">IPMS Sign Up</h2>
        </div>

        <div class="text-center loginFieldInput">
          <label for="username"></label><input type="text" class="form__field form-rounded" id="username" placeholder="Username"/>
        </div>

        <div class="text-center loginFieldInput">
          <label for="password"></label><input type="password" class="form__field form-rounded" id="password" placeholder="Password" oninput="updateMessage()"/>
        </div>

        <div class="text-center loginFieldInput">
          <label for="passwordConf"></label><input type="password" class="form__field form-rounded" id="passwordConf" placeholder="Confirm Password" oninput="updateMessage()"/>
        </div>

        <div class="text-center">
          <button type="button" class="btn btn-primary" onclick="createAccount()">Create New Account</button>
        </div>

        <div id="message">
          <p id="confirm" class="valid">password and confirmation are the same</p>
          <p id="letter" class="invalid">password contains a lowercase letter</p>
          <p id="capital" class="invalid">password contains a capital letter</p>
          <p id="number" class="invalid">password contains a number</p>
          <p id="length" class="invalid">password is at least 8 characters</p>
        </div>
      </div>
    </div>

  </body>

  <script>
  // form entries
  const username = document.getElementById("username");
  const password = document.getElementById("password");
  const passwordConf = document.getElementById("passwordConf");

  // message entries
  const confirm = document.getElementById("confirm");
  const letter = document.getElementById("letter");
  const capital = document.getElementById("capital");
  const number = document.getElementById("number");
  const length = document.getElementById("length");

  function updateMessage() {
    // password and confirm password should be the same
    if (password.value === passwordConf.value) {
      confirm.classList.remove("invalid");
      confirm.classList.add("valid");
    } else {
      confirm.classList.remove("valid");
      confirm.classList.add("invalid");
    }

    // password must contain a lowercase
    if(password.value.match(/[a-z]/g)) {
      letter.classList.remove("invalid");
      letter.classList.add("valid");
    } else {
      letter.classList.remove("valid");
      letter.classList.add("invalid");
    }

    // Validate capital letters
    if(password.value.match(/[A-Z]/g)) {
      capital.classList.remove("invalid");
      capital.classList.add("valid");
    } else {
      capital.classList.remove("valid");
      capital.classList.add("invalid");
    }

    // Validate numbers
    if(password.value.match(/[0-9]/g)) {
      number.classList.remove("invalid");
      number.classList.add("valid");
    } else {
      number.classList.remove("valid");
      number.classList.add("invalid");
    }

    // Validate length
    if(password.value.length >= 8) {
      length.classList.remove("invalid");
      length.classList.add("valid");
    } else {
      length.classList.remove("valid");
      length.classList.add("invalid");
    }
  }

  function createAccount() {
    if (confirm.classList.contains("valid") &&
            letter.classList.contains("valid") &&
            capital.classList.contains("valid") &&
            number.classList.contains("valid") &&
            length.classList.contains("valid"))
      return; // Implement createAccount
  }

  </script>

</html>
