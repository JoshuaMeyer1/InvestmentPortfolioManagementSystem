<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">

<head>

    <title>Portfolio Screen</title>
    <link rel="stylesheet" href="../styles/styles.css" />
    <!-- fonts -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/fontawesome.min.css"
        integrity="undefined" crossorigin="anonymous" />

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

<!--    <script src="mainScript.js"></script>-->

    <script>

        let tablesDict = [];

        function updateTable() {
            localStorage.setItem("stockTable", JSON.stringify(tablesDict));
            const listTable = document.getElementById("stockTable");
            listTable.innerHTML = '';
            for (var i = 0; i < tablesDict.length; i++) {
                listTable.innerHTML += '<tr><th scope="row">' + String(i) + '</th><td>' + String(tablesDict[i]["stockName"]) + '</td><td>' + String(tablesDict[i]["stockExchange"]) + '</td><td>' + String(tablesDict[i]["buyDate"]) + '</td><td><button onclick="removeStock(' + i + ')" style="border-radius: 0" class="btn btn-outline-secondary" type="button">Remove</button></td></tr>';
            }
        }

        function removeStock(index) {
            tablesDict.splice(index, 1);
            updateTable();
        }

        function submitStock() {
            const stockName = document.getElementById("stockName").value;
            const stockExchange = document.getElementById("stockExchange").value;
            const buyDate = document.getElementById("buyDate").value;

            tablesDict.push({
                'stockName': stockName,
                'stockExchange': stockExchange,
                'buyDate': buyDate
            });

            console.log(tablesDict);
            updateTable();
        }

        function initialPopulateTable() {
            tablesDict = JSON.parse(localStorage.getItem("stockTable"));
            updateTable();
        }        

    </script>
</head>

<body onload="initialPopulateTable()">
    <div class="navigation">
        <ul>
            <li>
                <a href="#" style="padding-left: 0">
                    <svg height="200" width="200">
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:black;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#288494;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="100" cy="100" r="100" fill="white" />
                        <circle cx="100" cy="100" r="93" fill="url(#grad1)" />
                        <text fill="white" font-size="78" style="font-family:verdana,serif" x="3" y="131">IPMS</text>
                        Sorry, your browser does not support inline SVG.
                    </svg>
                </a>
            </li>
            <li>
                <a href="userProfile.html" style="color: #a8a8a8">
                    <span class="linkText">User Profile</span>
                </a>
            </li>

            <li>
                <a href="#">
                    <span class="linkText">Portfolio</span>
                </a>
            </li>

            <li>
                <a href="portfolioAnalysis.html" style="color: #a8a8a8">
                    <span class="linkText">Portfolio Analysis</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="header">
        <h2 style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, garamond,serif;">
            Data Selection
        </h2>
    </div>

    <div class="contentContainer">
        <div id="dataSelectionContent">
            <div id="parameterSelection" class="input-group input-group-lg">
                <div class="input-group-prepend">
                    <span class="input-group-text">Stock</span>
                </div>
                <label for="stockName"></label><input type="text" class="form-control" id="stockName" placeholder="ex. TSLA, AMZA, AAPL" />

                <div class="input-group-prepend">
                    <span class="input-group-text">Stock Exchange</span>
                </div>
                <label for="stockExchange"></label><input type="text" class="form-control" id="stockExchange" placeholder="Exe. Nasdaq, nyse" />

                <div class="input-group-prepend">
                    <span class="input-group-text">Buy Date</span>
                </div>
                <label for="buyDate"></label><input type="text" class="form-control" id="buyDate" placeholder="MM/DD/YYYY" />

                <button onclick="submitStock()" style="border-radius: 0" class="btn btn-outline-secondary"
                    type="button">
                    Add Stock
                </button>
            </div>
        </div>
    </div>

    <div class="contentContainer">
        <div id="stockPortfolio">
            <table class="table">
                <thead class="thead-light">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Stock</th>
                        <th scope="col">Stock Exchange</th>
                        <th scope="col">Buy Date</th>
                        <th scope="col">Remove</th>
                    </tr>
                </thead>
                <tbody id = "stockTable">

                    <!--
                    <tr>
                        <th scope="row">1</th>
                        <td>Mark</td>
                        <td>Otto</td>
                        <td>@mdo</td>
                        <td>
                            <button onclick="removeStock(' + i + ')" style="border-radius: 0px" class="btn btn-outline-secondary"
                            type="button">
                                RemoveStock
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">2</th>
                        <td>Jacob</td>
                        <td>Thornton</td>
                        <td>@fat</td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>Larry</td>
                        <td>the Bird</td>
                        <td>@twitter</td>
                    </tr>
                    -->

                </tbody>
            </table>
        </div>
    </div>
</body>

</html>

